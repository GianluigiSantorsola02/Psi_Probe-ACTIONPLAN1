#summary Overview of configuration options
----

= Stats Collection =

== Scheduling ==

Command line properties can be used to control stats collection schedules.  The format of these properties is:

  * `com.googlecode.psiprobe.beans.stats.collectors.CATEGORY.PARAMETER=EXPRESSION`

=== Category ===

The category of statistics to configure.  Must be one of the following:

|| *Category* || *Description* || *Data Points per Collection* ||
|| `app` || Number of requests/errors, current/average processing time time || 4 x (# of apps) + 2 ||
|| `cluster` || Bytes sent/received, messages sent/received || 4 ||
|| `connector` || Number of requests/errors, bytes sent/received, busy threads || 5 x (# of connectors) ||
|| `datasource` || established/busy connections || 2 x (# of datasources) ||
|| `memory` || JVM memory used per pool || 1 x (# of memory pools) + 1 ||
|| `runtime` || OS physical/virtual/swap memory used, CPU usage || 4 ||

=== Parameter ===

The parameter for the specified category.  Must be one of the following:

|| *Parameter* || *Description* ||
|| `period` || The length of time between each collection ||
|| `phase` || The offset from the top of the minute or hour when the collection will take place ||
|| `span` || The amount of time each data point is retained in history ||

=== Expression ===

A short time expression consisting of a number and a letter representing the unit of time (`s` for seconds, `m` for minutes, or `h` for hours).

The Expression you choose for a category's `period` should evenly divide the next highest unit of time.  Poor choices include `17s`, `24m` or `5h`.  Good choices include `15s`, `30m`, or `6h`.

=== Memory Consumption ===

These statistics can take up large amounts of memory, especially if you have a short period, a long span, or a large number of items within the category.  To determine the amount of memory taken up by a category's data, use the following formula:

<a href="http://www.codecogs.com/eqnedit.php?latex=m=\frac{4ds}{p}" target="_blank"><img src="http://latex.codecogs.com/png.latex?m=\frac{4ds}{p}%.png" title="m=\frac{4ds}{p}" align="middle" /></a>, where

  * _m_ = Memory used in bytes
  * _d_ = Data Points per Collection (see [#Category Category] above)
  * _s_ = `span` (in seconds)
  * _p_ = `period` (in seconds)

For instance, if you configure the `cluster` category to collect information every 10 seconds and retain it for 3 days, this will take up 405 KB of memory.

=== Defaults ===

You may view the default values [http://code.google.com/p/psi-probe/source/browse/trunk/web/src/main/conf/WEB-INF/stats.properties here] to see examples.

== Excluding PSI Probe ==

PSI Probe can ignore its own requests when calculating cumulative application statistics.  Just add the following to the command line:

  * `-Dcom.googlecode.psiprobe.beans.stats.collectors.app.selfIgnored`